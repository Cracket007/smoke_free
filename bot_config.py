import telebot
import os
from dotenv import load_dotenv
import random
from telebot import types
from datetime import datetime
import pytz

load_dotenv()
TOKEN = os.getenv('BOT_TOKEN')

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∏–µ–≤—Å–∫–∏–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å
TIMEZONE = pytz.timezone('Europe/Kiev')

def get_current_time():
    """–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ –∫–∏–µ–≤—Å–∫–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ"""
    return datetime.now(TIMEZONE)

if TOKEN is None:
    raise ValueError("–ù–µ –Ω–∞–π–¥–µ–Ω BOT_TOKEN –≤ —Ñ–∞–π–ª–µ .env")

bot = telebot.TeleBot(TOKEN)

# User data
users = {}

# Audio file paths
audio_files = {
    # –í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—Ä–∞–∑–∞
    "intro": "audio/intro.ogg",  # "–í—ã —É–∂–µ –Ω–µ –∫—É—Ä–∏—Ç–µ"
    
    # –ë–∞–∑–æ–≤—ã–µ —á–∏—Å–ª–∞ (1-20, 30)
    "numbers": {str(i): f"audio/{i}.ogg" for i in range(1, 21)},
    "twenty": "audio/20.ogg",
    "thirty": "audio/30.ogg",
    
    # –°–ª–æ–≤–∞ –¥–ª—è –ª–µ—Ç
    "year_forms": {
        "singular": "audio/year.ogg",     # –≥–æ–¥
        "few": "audio/years2-4.ogg",      # –≥–æ–¥–∞
        "plural": "audio/years.ogg"       # –ª–µ—Ç
    },
    
    # –°–ª–æ–≤–∞ –¥–ª—è –º–µ—Å—è—Ü–µ–≤
    "month_forms": {
        "singular": "audio/month.ogg",    # –º–µ—Å—è—Ü
        "few": "audio/months2-4.ogg",     # –º–µ—Å—è—Ü–∞
        "plural": "audio/months.ogg"      # –º–µ—Å—è—Ü–µ–≤
    },
    
    # –°–ª–æ–≤–∞ –¥–ª—è –¥–Ω–µ–π
    "day_forms": {
        "singular": "audio/day.ogg",      # –¥–µ–Ω—å
        "few": "audio/days2-4.ogg",       # –¥–Ω—è
        "plural": "audio/days.ogg"        # –¥–Ω–µ–π
    },
    
    # –°–ª–æ–≤–∞ –¥–ª—è —á–∞—Å–æ–≤
    "hour_forms": {
        "singular": "audio/hour.ogg",     # —á–∞—Å
        "few": "audio/hours2-4.ogg",      # —á–∞—Å–∞
        "plural": "audio/hours.ogg"       # —á–∞—Å–æ–≤
    },
    
    # –°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞
    "and": "audio/and.ogg",
    
    # –ú–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–µ —Ñ—Ä–∞–∑—ã
    "motivation": {
        "phrase1": "audio/phrase1.ogg",  # –Ø –≥–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π!
        "phrase2": "audio/phrase2.ogg",  # –í—ã –º–æ–ª–æ–¥–µ—Ü!
        "phrase3": "audio/phrase3.ogg",  # –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!
        "phrase4": "audio/phrase4.ogg",  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å - —ç—Ç–æ –ø–æ–±–µ–¥–∞!
        "phrase5": "audio/phrase5.ogg",  # –¢—ã —Å–¥–µ–ª–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä!
        "phrase6": "audio/phrase6.ogg",  # –≠—Ç–æ –¥–æ—Å—Ç–æ–π–Ω–æ —É–≤–∞–∂–µ–Ω–∏—è!
        "phrase7": "audio/phrase7.ogg",  # –£ —Ç–µ–±—è –æ—Ç–ª–∏—á–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è!
        "phrase8": "audio/phrase8.ogg",  # –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!
        "phrase9": "audio/phrase9.ogg",  # –Ø –≤–∞–º–∏ –≥–æ—Ä–∂—É—Å—å!
        "phrase10": "audio/phrase10.ogg"   # –í—ã —Ç–∞–∫–∏–µ —É–º–Ω–∏—á–∫–∏!
    }
} 

# –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
voice_motivation_phrases = [
    "–Ø –≥–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π!",
    "–í—ã –º–æ–ª–æ–¥–µ—Ü!",
    "–¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!",
    "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å - —ç—Ç–æ –ø–æ–±–µ–¥–∞!",
    "–¢—ã —Å–¥–µ–ª–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä!",
    "–≠—Ç–æ –¥–æ—Å—Ç–æ–π–Ω–æ —É–≤–∞–∂–µ–Ω–∏—è!",
    "–£ —Ç–µ–±—è –æ—Ç–ª–∏—á–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è!",
    "–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!",
    "–Ø –≤–∞–º–∏ –≥–æ—Ä–∂—É—Å—å!",
    "–í—ã —Ç–∞–∫–∏–µ —É–º–Ω–∏—á–∫–∏!"
]

# –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
text_motivation_phrases = [
    # –¢—É—Ç –æ—Å—Ç–∞–≤–ª—è–µ–º –≤—Å–µ –Ω–æ–≤—ã–µ —Ñ—Ä–∞–∑—ã —Å —ç–º–æ–¥–∑–∏
    "–¢—ã –ø—Ä–æ—Å—Ç–æ –∫–æ—Å–º–æ—Å! üöÄ",
    "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –±–µ–∑ —Å–∏–≥–∞—Ä–µ—Ç - —ç—Ç–æ –ø–æ–±–µ–¥–∞! üèÜ",
    "–¢—ã —Å–∏–ª—å–Ω–µ–µ, —á–µ–º –¥—É–º–∞–µ—à—å! üí™",
    "–°–≤–æ–±–æ–¥–∞ –æ—Ç –Ω–∏–∫–æ—Ç–∏–Ω–∞ - –ª—É—á—à–µ–µ —á—É–≤—Å—Ç–≤–æ! ‚ú®",
    "–ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! üåü",
    
    # –ü—Ä–æ –∑–¥–æ—Ä–æ–≤—å–µ
    "–¢–≤–æ–∏ –ª—ë–≥–∫–∏–µ –≥–æ–≤–æ—Ä—è—Ç —Å–ø–∞—Å–∏–±–æ! ü´Å",
    "–¢—ã –≤—ã–±—Ä–∞–ª –∑–¥–æ—Ä–æ–≤—å–µ - —ç—Ç–æ –∫—Ä—É—Ç–æ! ‚ù§Ô∏è",
    "–° –∫–∞–∂–¥—ã–º –¥–Ω—ë–º —Ç—ã –¥—ã—à–∏—à—å —Å–≤–æ–±–æ–¥–Ω–µ–µ! üå¨Ô∏è",
    "–¢–≤–æ—ë —Ç–µ–ª–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è! üí™",
    "–ó–¥–æ—Ä–æ–≤—å–µ –¥–æ—Ä–æ–∂–µ –ª—é–±–æ–π —Å–∏–≥–∞—Ä–µ—Ç—ã! üèÉ",
    
    # –ü—Ä–æ –¥–µ–Ω—å–≥–∏
    "–ö–æ–ø–∏–ª–∫–∞ –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è! üí∞",
    "–î–µ–Ω—å–≥–∏ —Ç–µ–ø–µ—Ä—å –Ω–∞ —á—Ç–æ-—Ç–æ –ø—Ä–∏—è—Ç–Ω–æ–µ! üíé",
    "–≠–∫–æ–Ω–æ–º–∏—è - –ø—Ä–∏—è—Ç–Ω—ã–π –±–æ–Ω—É—Å! ü§ë",
    "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ —Å–µ–±—è –æ–∫—É–ø–∞—é—Ç—Å—è! üìà",
    
    # –Æ–º–æ—Ä
    "–°–∏–≥–∞—Ä–µ—Ç—ã? –ù–µ, –Ω–µ —Å–ª—ã—à–∞–ª! üôâ",
    "–ù–∏–∫–æ—Ç–∏–Ω—É –∑–¥–µ—Å—å –Ω–µ —Ä–∞–¥—ã! üö´",
    "–î—ã–º? –¢–æ–ª—å–∫–æ –æ—Ç —à–∞—à–ª—ã–∫–æ–≤! üçñ",
    "–ó–∞—Ç—è–∂–∫–∞? –¢–æ–ª—å–∫–æ —Å–≤–µ–∂–∏–º –≤–æ–∑–¥—É—Ö–æ–º! üå≥",
    
    # –ü—Ä–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    "–¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π —á–µ–º–ø–∏–æ–Ω! üèÜ",
    "–ì–æ—Ä–¥–∏–º—Å—è —Ç–≤–æ–µ–π —Å–∏–ª–æ–π –≤–æ–ª–∏! üëä",
    "–≠—Ç–æ –¥–æ—Å—Ç–æ–π–Ω–æ —É–≤–∞–∂–µ–Ω–∏—è! üéñÔ∏è",
    "–¢—ã –ø—Ä–∏–º–µ—Ä –¥–ª—è –¥—Ä—É–≥–∏—Ö! üåü",
    
    # –° —é–º–æ—Ä–æ–º
    "–°–∏–≥–∞—Ä–µ—Ç–∞–º –ø–æ—Ä–∞ –Ω–∞ –ø–µ–Ω—Å–∏—é! üëã",
    "–ù–∏–∫–æ—Ç–∏–Ω –ø–ª–∞—á–µ—Ç –ø–æ —Ç–µ–±–µ! üò¢",
    "–¢–∞–±–∞—á–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –ø–µ—á–∞–ª–∏! üìâ",
    "–ü–∞—á–∫–∞ –∫—É—Ä–∏—Ç –≤ —Å—Ç–æ—Ä–æ–Ω–∫–µ! üòé",
    
    # –ü—Ä–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    "–í–∫—É—Å –∏ –∑–∞–ø–∞—Ö –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è! üëÉ",
    "–ö–æ–∂–∞ —Å–∏—è–µ—Ç, –ª—ë–≥–∫–∏–µ –ø–æ—é—Ç! ‚ú®",
    "–ó—É–±—ã –±–µ–ª–µ–µ, —É–ª—ã–±–∫–∞ —à–∏—Ä–µ! üòÅ",
    "–¢—ã –ø–∞—Ö–Ω–µ—à—å —Å–≤–æ–±–æ–¥–æ–π! üå∏",
    
    # –ú–æ—Ç–∏–≤–∞—Ü–∏—è
    "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ–µ –≤–æ–∑–º–æ–∂–Ω–æ! üöÄ",
    "–¢—ã –∫—Ä—É—á–µ, —á–µ–º –≤—á–µ—Ä–∞! üìà",
    "–°–∏–ª–∞ –≤–æ–ª–∏ level up! üÜô",
    "–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω! üéÆ",
    
    # –° —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º
    "–ü–æ—Å–ª–∞–ª –∫—É—Ä–µ–Ω–∏–µ –∫—É–¥–∞ –ø–æ–¥–∞–ª—å—à–µ! üñï",
    "–ù–∏–∫–æ—Ç–∏–Ω? –ù–∞—Ö—Ä–µ–Ω –Ω–∞–¥–æ! üò§",
    "–°–∏–≥–∞—Ä–µ—Ç–∞–º –∑–¥–µ—Å—å –Ω–µ –º–µ—Å—Ç–æ! üí™",
    "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ –±–∞–Ω! üö´",
    
    # –ü—Ä–æ –±—É–¥—É—â–µ–µ
    "–°–≤–µ—Ç–ª–æ–µ –±—É–¥—É—â–µ–µ –≤–ø–µ—Ä–µ–¥–∏! üåÖ",
    "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤—Å—ë –ª—É—á—à–µ! ‚≠ê",
    "–¢—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏! üõ£Ô∏è",
    "–ë—É–¥—É—â–µ–µ –±–µ–∑ –¥—ã–º–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ! üåà"
]

def get_voice_motivation():
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –∏ –∫–ª—é—á –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    phrase = random.choice(voice_motivation_phrases)
    # –ú–∞–ø–ø–∏–Ω–≥ —Ñ—Ä–∞–∑ –Ω–∞ –∫–ª—é—á–∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤
    phrase_to_key = {
        "–Ø –≥–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π!": "phrase1",
        "–í—ã –º–æ–ª–æ–¥–µ—Ü!": "phrase2",
        "–¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!": "phrase3",
        "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å - —ç—Ç–æ –ø–æ–±–µ–¥–∞!": "phrase4",
        "–¢—ã —Å–¥–µ–ª–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä!": "phrase5",
        "–≠—Ç–æ –¥–æ—Å—Ç–æ–π–Ω–æ —É–≤–∞–∂–µ–Ω–∏—è!": "phrase6",
        "–£ —Ç–µ–±—è –æ—Ç–ª–∏—á–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è!": "phrase7",
        "–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!": "phrase8",
        "–Ø –≤–∞–º–∏ –≥–æ—Ä–∂—É—Å—å!": "phrase9",
        "–í—ã —Ç–∞–∫–∏–µ —É–º–Ω–∏—á–∫–∏!": "phrase10"
    }
    return phrase, phrase_to_key[phrase]

def get_text_motivation():
    """–ü–æ–ª—É—á–∏—Ç—å –¥–≤–µ —Å–ª—É—á–∞–π–Ω—ã–µ —Ñ—Ä–∞–∑—ã –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    return f"{random.choice(text_motivation_phrases)}\n{random.choice(text_motivation_phrases)}" 